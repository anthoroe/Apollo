<script src="ApolloClient.js"></script>

<script>

function join(msg){
	console.log(msg);
	document.body.innerHTML += '<div id="'+msg.id+'" style="background-color: red;width:100px;height:100px;position:absolute;top:'+msg.y*window.innerHeight+'px;left:'+msg.x*window.innerWidth+';"></div>';
}

function leave(msg){
	document.body.removeChild(document.getElementById(msg.id));
}

function move(msg){
	document.getElementById(msg.id).style.left = msg.x*window.innerWidth;
	document.getElementById(msg.id).style.top = msg.y*window.innerHeight;
}

function chat(msg){
	document.getElementById(msg.id).innerText = msg.chat;
}	

addMessageListener("join", join);
addMessageListener("leave", leave);
addMessageListener("move", move);
addMessageListener("chat", chat);

ApolloClient("localhost", 8909);
</script>

<body>
	<div id="field" style="background-color: #EEE; width: 100%; height: 100%;" onClick="sendMessage({'type':'move', 'x':(event.pageX/window.innerWidth), 'y':(event.pageY/window.innerHeight)}) 
"></div>
</body>