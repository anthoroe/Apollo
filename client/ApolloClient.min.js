var _sock,ApolloDebug=!1;function sendMessage(a){ApolloDebug&&console.log("Sent: "+JSON.stringify(a));_sock.send(JSON.stringify(a))}function parseMessage(a){ApolloDebug&&console.log("Received: "+a);return JSON.parse(a)}var messageListeners={};function handleMessage(a){if(a.type in messageListeners)messageListeners[a.type](a);else console.log("Unhandled "+a.type+" message"),console.log(a)}function addMessageListener(a,b){messageListeners[a]=b}
function ApolloClient(a,b){_sock=new WebSocket("ws://"+a+":"+b);_sock.onopen=function(a){handleMessage({type:"connect"})};_sock.onclose=function(a){handleMessage({type:"disconnect"})};_sock.onmessage=function(a){handleMessage(parseMessage(a.data))};_sock.onerror=function(a){handleMessage({type:"error",error:a.data})}};
